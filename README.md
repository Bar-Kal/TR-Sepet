# TR-Sepet üõí

**TR-Sepet** is a powerful price comparison tool designed to track and analyze the prices of grocery products across various online stores in Turkey. It provides a comprehensive solution for collecting, storing, and visualizing price data, helping users make informed purchasing decisions.

## ‚ú® Features

- **Automated Scraping:**  A modular and extensible scraper that can collect product data from multiple e-commerce websites.
- **Price History:** Stores historical price data, allowing users to track price fluctuations over time.
- **Product Categorization:** Automatically categorizes products using a machine learning model (FastText) to distinguish between food and non-food items.
- **Web Interface:** A user-friendly web interface built with Flask that allows users to search, filter, and visualize product data.
- **Data Visualization:**  Displays price trends and comparisons using interactive charts.
- **Easy Deployment:** The scraped data is packaged into a compressed SQLite database, which can be easily uploaded to the web application.

## üèóÔ∏è Architecture

The project is divided into three main components:

1.  **Scraper (`sepet_app/scraper`):** This is the core data collection engine. It's a Python-based application that:
    *   Reads a list of shops from a configuration file (`shops.json`).
    *   Dynamically loads the appropriate scraper module for each shop.
    *   Scrapes product data for a predefined list of categories.
    *   Uses a machine learning model to filter out non-food items.
    *   Packages the collected data into a compressed SQLite database (`.db.7z`).

2.  **Uploader (`sepet_app/uploader`):** A simple Flask application that provides a web interface to upload the compressed database file generated by the scraper.

3.  **Frontend (`sepet_app/frontend`):** The main web application that users interact with. It's a Flask-based application that:
    *   Receives the uploaded database file from the Uploader.
    *   Unzips the database and makes it available to the application.
    *   Provides a web interface for searching, filtering, and visualizing the product price data.

## üöÄ How to Use

1.  **Run the Scraper:**  Execute the scraper to collect the latest product data. This will generate a compressed database file.
2.  **Upload the Database:** Use the Uploader application to upload the generated database file to the Frontend.
3.  **Browse Products:** Access the Frontend application to browse, search, and analyze the product price data.

## Configuration

The application's behavior is controlled by two files in the `sepet_app/configs/` directory.

### 1. `shops.json`
This file lists the websites to be scraped. To add or remove a shop, you edit this file. Each shop requires:
- `shop_name`: A unique name for the shop.
- `base_url`: The website's home page URL.
- `scraper_module`: The full Python path to the file containing the scraper's logic (e.g., `sepet_app.scrapers.migros`).
- `scraper_class`: The name of the scraper class inside that file (e.g., `MigrosScraper`).

### 2. `food.json`
A JSON file listing the product categories to search for on each website.

## üõ†Ô∏è How to Run the Scraper

To ensure all modules are found correctly, you **must** run the application from the project's root directory (`TR-Sepet/`) using the `-m` flag.

```bash
python -m sepet_app.scraper.run_scraping
```

This command correctly sets up the Python path, allowing the factory to dynamically import the scraper modules defined in `shops.json`.

## üß© How to Add a New Scraper

Adding a new website is a simple three-step process that does not require changing the main application logic.

#### Step 1: Create the Scraper File
Create a new Python file in the `sepet_app/scrapers/` directory. For example, `sok.py`.

#### Step 2: Implement the Scraper Class
In your new file (`sok.py`), create a class that inherits from `BaseScraper` and implements the required `search` method. This method will contain the unique scraping logic for the new website.

#### Step 3: Update `shops.json`
Add a new entry for your scraper in the `sepet_app/configs/shops.json` file.
